!function(e){function t(n){if(o[n])return o[n].exports;var a=o[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var o={};t.m=e,t.c=o,t.d=function(e,o,n){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:n})},t.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=8)}([function(e,t){e.exports=jQuery},,,,,,function(e,t,o){"use strict";(function(e){function t(){e(".bloomio-alert-wrap").outerHeight(),e(".bloomio-alert-wrap").show().animate({bottom:"0"},"slow")}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};console.log("alertjs"),e(window).on("load",function(){try{if(e("body").hasClass("home"))var n="homepage",a=Cookies.getJSON("homepage");else n="subpages",a=Cookies.getJSON("subpages");"block"!=a.status&&("homepage"==n?void 0===a?t():"object"==(void 0===a?"undefined":o(a))&&latest_homepage_alert>a.alert_id&&t():"subpages"==n&&(void 0===a?t():"object"==(void 0===a?"undefined":o(a))&&latest_subpages_alert>a.alert_id&&t()))}catch(e){t()}e(".btn-alert-close").click(function(t){var o=e(this).data("alert"),n=e(this).data("scope"),a=e(".bloomio-alert-wrap").outerHeight();e(this).parents(".bloomio-alert-wrap").animate({bottom:"-"+a+"px"},"fast"),e("footer").animate({"padding-bottom":0},"fast"),function(e,t){var o=new Date,n=o.getFullYear(),a=o.getMonth(),r=o.getDate(),i=new Date(n,a+1,0).getDate()-r,s={status:"block",alert_id:t};Cookies.set(e,s,{expires:i})}(n,o),e(this).parents(".bloomio-alert-wrap").hide()})})}).call(this,o(0))},function(e,t,o){"use strict";(function(e){!function(e){e("#modal-speedbump")&&(function(){var t=window.whitelist_domains,o=new Array;for(var n in t)o.push(t[n].domain);o.push(location.host),document.addEventListener("click",function(t){if("A"==t.target.nodeName||function(e){for(var t=e.parentNode;null!=t;){if("A"==t.nodeName)return!0;t=t.parentNode}return!1}(t.target)){var n=function(e){for(var t=e.parentNode;null!=t;){if("A"==t.nodeName)return t;t=t.parentNode}return!1}(t.target)||t.target,a=!1;for(var r in o)if(n.href.indexOf(o[r])>0||n.href===o[r]){a=!0;break}""===n.href&&(a=!0),a||(t.preventDefault(),e("#modal-speedbump").animate({width:"show"},"fast").addClass("is-active").focus(),e(".js-modal-overlay").addClass("is-visible"),e("body").addClass("no-scroll"),window.targetURL=n.href)}"BUTTON"==t.target.nodeName&&"continue"==t.target.id&&window.open(window.targetURL)})}(),console.info("Initialized speedbump."))}(e)}).call(this,o(0))},function(e,t,o){"use strict";o(7),o(6)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vanMvYmxvb21pby5qcyIsIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwialF1ZXJ5XCIiLCJ3ZWJwYWNrOi8vLy4vYXNzZXRzL3NvdXJjZS9qcy9ibG9vbWlvL3Jhdy9ibG9vbWlvLWFsZXJ0LmpzIiwid2VicGFjazovLy8uL2Fzc2V0cy9zb3VyY2UvanMvYmxvb21pby9yYXcvc3BlZWRidW1wLmpzIiwid2VicGFjazovLy8uL2Fzc2V0cy9zb3VyY2UvanMvYmxvb21pby9pbmRleC1ibG9vbWlvLmpzIl0sIm5hbWVzIjpbIm1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpbnN0YWxsZWRNb2R1bGVzIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJjb25maWd1cmFibGUiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsInZhbHVlIiwibiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0Iiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwialF1ZXJ5IiwiJCIsImJsb29taW9fb3Blbl9hbGVydCIsIm91dGVySGVpZ2h0Iiwic2hvdyIsImFuaW1hdGUiLCJib3R0b20iLCJfdHlwZW9mIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJvYmoiLCJjb25zdHJ1Y3RvciIsImNvbnNvbGUiLCJsb2ciLCJ3aW5kb3ciLCJvbiIsImhhc0NsYXNzIiwiYWxlcnRfc2NvcGUiLCJhbGVydF9zdGF0dXMiLCJDb29raWVzIiwiZ2V0SlNPTiIsInN0YXR1cyIsImxhdGVzdF9ob21lcGFnZV9hbGVydCIsImFsZXJ0X2lkIiwibGF0ZXN0X3N1YnBhZ2VzX2FsZXJ0IiwiZSIsImNsaWNrIiwidGhpc19hbGVydF9pZCIsInRoaXMiLCJkYXRhIiwidGhpc19hbGVydF9zY29wZSIsImFsZXJ0X2hlaWdodCIsInBhcmVudHMiLCJwYWRkaW5nLWJvdHRvbSIsImRhdGUiLCJEYXRlIiwieSIsImdldEZ1bGxZZWFyIiwiZ2V0TW9udGgiLCJjdXJyZW50X2RheSIsImdldERhdGUiLCJvcGVuX29uIiwiY29va2llX2RhdGEiLCJzZXQiLCJleHBpcmVzIiwiYmxvb21pb19zZXRfYWxlcnRfY29va2llX2pzIiwiaGlkZSIsInBhcmVudCIsInBhcmVudE5vZGUiLCJub2RlTmFtZSIsIndoaXRlbGlzdF9kb21haW5zIiwiZG9tYWluc19hcnJheSIsIkFycmF5IiwicHVzaCIsImRvbWFpbiIsImxvY2F0aW9uIiwiaG9zdCIsImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwidGFyZ2V0Iiwibm9kZSIsImlzSW5zaWRlQSIsIm5vZGVBIiwiZ2V0Tm9kZUEiLCJzYWZlIiwia2V5IiwiaHJlZiIsImluZGV4T2YiLCJwcmV2ZW50RGVmYXVsdCIsIndpZHRoIiwiYWRkQ2xhc3MiLCJmb2N1cyIsInRhcmdldFVSTCIsImlkIiwib3BlbiIsInNwZWVkYnVtcCIsImluZm8iXSwibWFwcGluZ3MiOiJDQUFTLFNBQVVBLEdDSW5CLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUMsRUFBQUQsR0FDQSxPQUFBQyxFQUFBRCxHQUFBRSxRQUdBLElBQUFDLEVBQUFGLEVBQUFELElBQ0FJLEVBQUFKLEVBQ0FLLEtBQ0FILFlBVUEsT0FOQUosRUFBQUUsR0FBQU0sS0FBQUgsRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUgsR0FHQUksRUFBQUUsS0FHQUYsRUFBQUQsUUF2QkEsSUFBQUQsS0E0QkFGLEVBQUFRLEVBQUFULEVBR0FDLEVBQUFTLEVBQUFQLEVBR0FGLEVBQUFVLEVBQUEsU0FBQVAsRUFBQVEsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVYsRUFBQVEsSUFDQUcsT0FBQUMsZUFBQVosRUFBQVEsR0FDQUssZ0JBQ0FDLGNBQ0FDLElBQUFOLEtBTUFaLEVBQUFt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QSxJQUFJZCxFQUFTYyxFQUFLYixXQUNELE1BQVZELEdBQWdCLENBQ25CLEdBQXVCLEtBQW5CQSxFQUFPRSxTQUNQLFNBRUpGLEVBQVNBLEVBQU9DLFdBRXBCLFNBbUJxQ2MsQ0FBVUgsRUFBTUMsUUFBVSxDQUMzRCxJQUFJRyxFQWhCWixTQUFrQkYsR0FFZCxJQURBLElBQUlkLEVBQVNjLEVBQUtiLFdBQ0QsTUFBVkQsR0FBZ0IsQ0FDbkIsR0FBdUIsS0FBbkJBLEVBQU9FLFNBQ1AsT0FBT0YsRUFFWEEsRUFBU0EsRUFBT0MsV0FFcEIsU0FRZ0JnQixDQUFTTCxFQUFNQyxTQUFXRCxFQUFNQyxPQUV4Q0ssS0FDSixJQUFLLElBQUlDLEtBQU9mLEVBRVosR0FBS1ksRUFBTUksS0FBS0MsUUFBUWpCLEVBQWNlLElBQVEsR0FDdkNILEVBQU1JLE9BQVNoQixFQUFjZSxHQUFPLENBQ3ZDRCxLQUNBLE1BSVcsS0FBZkYsRUFBTUksT0FDTkYsTUFJRUEsSUFDRk4sRUFBTVUsaUJBSU5wRSxFQUFFLG9CQUNESSxTQUFTaUUsTUFBTSxRQUFTLFFBQVFDLFNBQVMsYUFDekNDLFFBQ0R2RSxFQUFFLHFCQUFxQnNFLFNBQVMsY0FDaEN0RSxFQUFFLFFBQVFzRSxTQUFTLGFBRW5CekQsT0FBTzJELFVBQVlWLEVBQU1JLE1BS0gsVUFBekJSLEVBQU1DLE9BQU9YLFVBQTJDLFlBQW5CVSxFQUFNQyxPQUFPYyxJQUNuRDVELE9BQU82RCxLQUFLN0QsT0FBTzJELGFBV3ZCRyxHQUNBaEUsUUFBUWlFLEtBQUssMkJBbEd4QixDQXdHSTdFLEtKb0x3QnZCLEtBQUttRCxLQUFNMUQsRUFBb0IsS0FJdEQsU0FBVUksRUFBUUQsRUFBU0gsR0FFakMsYUszUUFBLEVBQUEsR0FHQUEsRUFBQSIsImZpbGUiOiJqcy9ibG9vbWlvLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4vKioqKioqLyBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbi8qKioqKiovIFx0XHR9XG4vKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4vKioqKioqLyBcdFx0XHRpOiBtb2R1bGVJZCxcbi8qKioqKiovIFx0XHRcdGw6IGZhbHNlLFxuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge31cbi8qKioqKiovIFx0XHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbi8qKioqKiovIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuLyoqKioqKi8gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbi8qKioqKiovIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4vKioqKioqLyBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuLyoqKioqKi8gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuLyoqKioqKi8gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuLyoqKioqKi8gXHRcdFx0XHRnZXQ6IGdldHRlclxuLyoqKioqKi8gXHRcdFx0fSk7XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4vKioqKioqLyBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbi8qKioqKiovIFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuLyoqKioqKi8gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuLyoqKioqKi8gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbi8qKioqKiovIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4vKioqKioqLyBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuLyoqKioqKi8gXHRcdHJldHVybiBnZXR0ZXI7XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gOCk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbm1vZHVsZS5leHBvcnRzID0galF1ZXJ5O1xuXG4vKioqLyB9KSxcbi8qIDEgKi8sXG4vKiAyICovLFxuLyogMyAqLyxcbi8qIDQgKi8sXG4vKiA1ICovLFxuLyogNiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbigkKSB7XG5cbnZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblxuY29uc29sZS5sb2coJ2FsZXJ0anMnKTtcblxuZnVuY3Rpb24gYmxvb21pb19zZXRfYWxlcnRfY29va2llX2pzKHRoaXNfYWxlcnRfc2NvcGUsIHRoaXNfYWxlcnRfaWQpIHtcbiAgLy8gY29uc29sZS5sb2coJ2Nsb3NlJywgdGhpc19hbGVydF9zY29wZSwgdGhpc19hbGVydF9pZCk7XG4gIHZhciBkYXRlID0gbmV3IERhdGUoKSxcbiAgICAgIHkgPSBkYXRlLmdldEZ1bGxZZWFyKCksXG4gICAgICBtID0gZGF0ZS5nZXRNb250aCgpO1xuXG4gIHZhciBjdXJyZW50X2RheSA9IGRhdGUuZ2V0RGF0ZSgpO1xuICB2YXIgbGFzdF9kYXlfcmF3ID0gbmV3IERhdGUoeSwgbSArIDEsIDApO1xuICB2YXIgbGFzdF9kYXkgPSBsYXN0X2RheV9yYXcuZ2V0RGF0ZSgpO1xuICB2YXIgb3Blbl9vbiA9IGxhc3RfZGF5IC0gY3VycmVudF9kYXk7XG5cbiAgdmFyIGNvb2tpZV9kYXRhID0ge1xuICAgIHN0YXR1czogXCJibG9ja1wiLFxuICAgIGFsZXJ0X2lkOiB0aGlzX2FsZXJ0X2lkXG4gIH07XG5cbiAgQ29va2llcy5zZXQodGhpc19hbGVydF9zY29wZSwgY29va2llX2RhdGEsIHtcbiAgICBleHBpcmVzOiBvcGVuX29uXG4gIH0pO1xufVxuXG5mdW5jdGlvbiBibG9vbWlvX29wZW5fYWxlcnQoKSB7XG4gIHZhciBhbGVydF9oZWlnaHQgPSAkKCcuYmxvb21pby1hbGVydC13cmFwJykub3V0ZXJIZWlnaHQoKTtcbiAgJCgnLmJsb29taW8tYWxlcnQtd3JhcCcpLnNob3coKS5hbmltYXRlKHtcbiAgICBib3R0b206ICcwJ1xuICB9LCBcInNsb3dcIik7XG59XG5cbiQod2luZG93KS5vbignbG9hZCcsIGZ1bmN0aW9uICgpIHtcblxuICAvLyBjb25zb2xlLmxvZyhkb2N1bWVudC5jb29raWUpO1xuICB0cnkge1xuICAgIGlmICgkKCdib2R5JykuaGFzQ2xhc3MoJ2hvbWUnKSkge1xuICAgICAgdmFyIGFsZXJ0X3Njb3BlID0gXCJob21lcGFnZVwiO1xuICAgICAgdmFyIGFsZXJ0X3N0YXR1cyA9IENvb2tpZXMuZ2V0SlNPTignaG9tZXBhZ2UnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGFsZXJ0X3Njb3BlID0gXCJzdWJwYWdlc1wiO1xuICAgICAgdmFyIGFsZXJ0X3N0YXR1cyA9IENvb2tpZXMuZ2V0SlNPTignc3VicGFnZXMnKTtcbiAgICB9XG4gICAgLy8gY29uc29sZS5sb2coYWxlcnRfc3RhdHVzKTtcblxuICAgIGlmIChhbGVydF9zdGF0dXMuc3RhdHVzICE9IFwiYmxvY2tcIikge1xuICAgICAgaWYgKGFsZXJ0X3Njb3BlID09ICdob21lcGFnZScpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBhbGVydF9zdGF0dXMgPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBibG9vbWlvX29wZW5fYWxlcnQoKTtcbiAgICAgICAgfSBlbHNlIGlmICgodHlwZW9mIGFsZXJ0X3N0YXR1cyA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoYWxlcnRfc3RhdHVzKSkgPT0gJ29iamVjdCcgJiYgbGF0ZXN0X2hvbWVwYWdlX2FsZXJ0ID4gYWxlcnRfc3RhdHVzLmFsZXJ0X2lkKSB7XG4gICAgICAgICAgYmxvb21pb19vcGVuX2FsZXJ0KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy9ub3RoaW5nIHdpbGwgaGFwcGVuXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoYWxlcnRfc2NvcGUgPT0gJ3N1YnBhZ2VzJykge1xuICAgICAgICBpZiAodHlwZW9mIGFsZXJ0X3N0YXR1cyA9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGJsb29taW9fb3Blbl9hbGVydCgpO1xuICAgICAgICB9IGVsc2UgaWYgKCh0eXBlb2YgYWxlcnRfc3RhdHVzID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihhbGVydF9zdGF0dXMpKSA9PSAnb2JqZWN0JyAmJiBsYXRlc3Rfc3VicGFnZXNfYWxlcnQgPiBhbGVydF9zdGF0dXMuYWxlcnRfaWQpIHtcbiAgICAgICAgICBibG9vbWlvX29wZW5fYWxlcnQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvL25vdGhpbmcgd2lsbCBoYXBwZW5cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIC8vZG8gbm90aGluZ1xuICAgIC8vIGNvbnNvbGUubG9nKCdhbGVydCBkbyBub3RoaW5nJyk7XG4gICAgYmxvb21pb19vcGVuX2FsZXJ0KCk7XG4gIH1cblxuICAkKCcuYnRuLWFsZXJ0LWNsb3NlJykuY2xpY2soZnVuY3Rpb24gKGUpIHtcblxuICAgIHZhciB0aGlzX2FsZXJ0X2lkID0gJCh0aGlzKS5kYXRhKCdhbGVydCcpO1xuICAgIHZhciB0aGlzX2FsZXJ0X3Njb3BlID0gJCh0aGlzKS5kYXRhKCdzY29wZScpO1xuICAgIHZhciBhbGVydF9oZWlnaHQgPSAkKCcuYmxvb21pby1hbGVydC13cmFwJykub3V0ZXJIZWlnaHQoKTtcblxuICAgICQodGhpcykucGFyZW50cygnLmJsb29taW8tYWxlcnQtd3JhcCcpLmFuaW1hdGUoe1xuICAgICAgYm90dG9tOiAnLScgKyBhbGVydF9oZWlnaHQgKyAncHgnXG4gICAgfSwgXCJmYXN0XCIpO1xuICAgICQoJ2Zvb3RlcicpLmFuaW1hdGUoe1xuICAgICAgJ3BhZGRpbmctYm90dG9tJzogMFxuICAgIH0sIFwiZmFzdFwiKTtcbiAgICBibG9vbWlvX3NldF9hbGVydF9jb29raWVfanModGhpc19hbGVydF9zY29wZSwgdGhpc19hbGVydF9pZCk7XG5cbiAgICAkKHRoaXMpLnBhcmVudHMoJy5ibG9vbWlvLWFsZXJ0LXdyYXAnKS5oaWRlKCk7XG4gIH0pO1xufSk7XG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwodGhpcywgX193ZWJwYWNrX3JlcXVpcmVfXygwKSkpXG5cbi8qKiovIH0pLFxuLyogNyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihqUXVlcnkpIHtcblxuLy8gVGhpcyBzY3JpcHQgZXZhbHVhdGVzIGNsaWNrcyBmb3IgYSBsaW5rIGFuY2hvcixcbi8vIGFuZCB0cmlnZ2VycyB3YXJuaW5nIG1vZGFsIGlmIGFuY2hvciBpcyBub3Qgd2hpdGVsaXN0ZWQuXG47KGZ1bmN0aW9uICgkKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgc3BlZWRidW1wID0gZnVuY3Rpb24gc3BlZWRidW1wKCkge1xuXG4gICAgICAgIC8vIEdldCB3aGl0ZWxpc3QgZG9tYWlucyBmcm9tIHNwZWVkYnVtcC5waHBcbiAgICAgICAgLy8gc3BlZWRidW1wLnBocCByZXR1cm5zIGFuIGFycmF5IG9mIG9iamVjdHMgZnJvbSBBQ0YgZ2xvYmFsIG9wdGlvbnNcbiAgICAgICAgLy8gTGlrZSB0aGlzIFt7XCJkb21haW5cIjpcImdvb2dsZS5jb21cIn0se1wiZG9tYWluXCI6XCJmYWNlYm9vay5jb21cIn1cbiAgICAgICAgdmFyIHdoaXRlbGlzdF9kb21haW5zID0gd2luZG93LndoaXRlbGlzdF9kb21haW5zO1xuXG4gICAgICAgIC8vIE5ldyBhcnJheVxuICAgICAgICB2YXIgZG9tYWluc19hcnJheSA9IG5ldyBBcnJheSgpO1xuXG4gICAgICAgIC8vIFB1c2ggZG9tYWlucyB0byAnZG9tYWluc19hcnJheSdcbiAgICAgICAgLy8gV2UgZ2V0IGFuIGFycmF5IGxpa2UgdGhpcyBbXCJnb29nbGUuY29tXCIsIFwiZmFjZWJvb2suY29tXCJdXG4gICAgICAgIGZvciAodmFyIGkgaW4gd2hpdGVsaXN0X2RvbWFpbnMpIHtcbiAgICAgICAgICAgIGRvbWFpbnNfYXJyYXkucHVzaCh3aGl0ZWxpc3RfZG9tYWluc1tpXS5kb21haW4pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUHVzaCBob3N0IGRvbWFpbiB0byBkb21haW5zX2FycmF5XG4gICAgICAgIGRvbWFpbnNfYXJyYXkucHVzaChsb2NhdGlvbi5ob3N0KTtcblxuICAgICAgICAvLyBDaGVjayBmb3IgYW5jaG9yIGluIGNsaWNrZWQgbm9kZVxuICAgICAgICBmdW5jdGlvbiBpc0luc2lkZUEobm9kZSkge1xuICAgICAgICAgICAgdmFyIHBhcmVudCA9IG5vZGUucGFyZW50Tm9kZTtcbiAgICAgICAgICAgIHdoaWxlIChwYXJlbnQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGlmIChwYXJlbnQubm9kZU5hbWUgPT0gJ0EnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50Tm9kZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEdldCBhbmNob3IgaW4gY2xpY2tlZCBub2RlXG4gICAgICAgIGZ1bmN0aW9uIGdldE5vZGVBKG5vZGUpIHtcbiAgICAgICAgICAgIHZhciBwYXJlbnQgPSBub2RlLnBhcmVudE5vZGU7XG4gICAgICAgICAgICB3aGlsZSAocGFyZW50ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZiAocGFyZW50Lm5vZGVOYW1lID09ICdBJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyZW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50Tm9kZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEV2YWx1YXRlIGNsaWNrLCBkZXRlcm1pbmUgaWYgYSBsaW5rIHdhcyBjbGlja2VkXG4gICAgICAgIC8vIElmIGEgbGluayB3YXMgY2xpY2tlZCwgZ2V0IHRoZSBsaW5rXG4gICAgICAgIC8vIElmIGxpbmsgaXMgbm90IHdoaXRlbGlzdGVkLCBzaG93IHdhcm5pbmcgcG9wdXBcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQubm9kZU5hbWUgPT0gJ0EnIHx8IGlzSW5zaWRlQShldmVudC50YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5vZGVBID0gZ2V0Tm9kZUEoZXZlbnQudGFyZ2V0KSB8fCBldmVudC50YXJnZXQ7XG5cbiAgICAgICAgICAgICAgICB2YXIgc2FmZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBkb21haW5zX2FycmF5KSB7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGVBLmhyZWYuaW5kZXhPZihkb21haW5zX2FycmF5W2tleV0pID4gMCB8fCBub2RlQS5ocmVmID09PSBkb21haW5zX2FycmF5W2tleV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNhZmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAobm9kZUEuaHJlZiA9PT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICBzYWZlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoIXNhZmUpIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBPcGVuIHNwZWVkYnVtcCBtb2RhbCB3aXRoIEZvdW5kYXRpb25cbiAgICAgICAgICAgICAgICAgICAgLy8gJCgnI21vZGFsLXNwZWVkYnVtcCcpLmZvdW5kYXRpb24oJ29wZW4nKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnI21vZGFsLXNwZWVkYnVtcCcpLmFuaW1hdGUoeyB3aWR0aDogJ3Nob3cnIH0sICdmYXN0JykuYWRkQ2xhc3MoJ2lzLWFjdGl2ZScpLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgICQoJy5qcy1tb2RhbC1vdmVybGF5JykuYWRkQ2xhc3MoJ2lzLXZpc2libGUnKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnYm9keScpLmFkZENsYXNzKCduby1zY3JvbGwnKTtcblxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cudGFyZ2V0VVJMID0gbm9kZUEuaHJlZjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQubm9kZU5hbWUgPT0gJ0JVVFRPTicgJiYgZXZlbnQudGFyZ2V0LmlkID09ICdjb250aW51ZScpIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cub3Blbih3aW5kb3cudGFyZ2V0VVJMKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHZhciAkZWwgPSAkKCcjbW9kYWwtc3BlZWRidW1wJyk7XG5cbiAgICAvLyBJbml0aWFsaXplciBmdW5jdGlvblxuICAgIHZhciBpbml0ID0gZnVuY3Rpb24gaW5pdCgpIHtcblxuICAgICAgICBpZiAoJGVsKSB7XG4gICAgICAgICAgICBzcGVlZGJ1bXAoKTtcbiAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnSW5pdGlhbGl6ZWQgc3BlZWRidW1wLicpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGluaXQoKTtcbn0pKGpRdWVyeSk7XG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwodGhpcywgX193ZWJwYWNrX3JlcXVpcmVfXygwKSkpXG5cbi8qKiovIH0pLFxuLyogOCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5fX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXG5fX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXG4vKioqLyB9KVxuLyoqKioqKi8gXSk7IiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbiBcdFx0XHRcdGdldDogZ2V0dGVyXG4gXHRcdFx0fSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA4KTtcbiIsIm1vZHVsZS5leHBvcnRzID0galF1ZXJ5OyIsImNvbnNvbGUubG9nKCdhbGVydGpzJyk7XG5cbmZ1bmN0aW9uIGJsb29taW9fc2V0X2FsZXJ0X2Nvb2tpZV9qcyh0aGlzX2FsZXJ0X3Njb3BlLCB0aGlzX2FsZXJ0X2lkKSB7XG4gICAgLy8gY29uc29sZS5sb2coJ2Nsb3NlJywgdGhpc19hbGVydF9zY29wZSwgdGhpc19hbGVydF9pZCk7XG4gICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpLFxuICAgICAgeSA9IGRhdGUuZ2V0RnVsbFllYXIoKSxcbiAgICAgIG0gPSBkYXRlLmdldE1vbnRoKCk7XG5cbiAgICB2YXIgY3VycmVudF9kYXkgPSBkYXRlLmdldERhdGUoKTtcbiAgICB2YXIgbGFzdF9kYXlfcmF3ID0gbmV3IERhdGUoeSwgbSArIDEsIDApO1xuICAgIHZhciBsYXN0X2RheSA9IGxhc3RfZGF5X3Jhdy5nZXREYXRlKCk7XG4gICAgdmFyIG9wZW5fb24gPSBsYXN0X2RheSAtIGN1cnJlbnRfZGF5O1xuXG4gICAgdmFyIGNvb2tpZV9kYXRhID0ge1xuICAgICAgc3RhdHVzOiBcImJsb2NrXCIsXG4gICAgICBhbGVydF9pZDogdGhpc19hbGVydF9pZFxuICAgIH07XG5cbiAgICBDb29raWVzLnNldCh0aGlzX2FsZXJ0X3Njb3BlLCBjb29raWVfZGF0YSwge1xuICAgICAgZXhwaXJlczogb3Blbl9vblxuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gYmxvb21pb19vcGVuX2FsZXJ0KCkge1xuICAgIHZhciBhbGVydF9oZWlnaHQgPSAkKCcuYmxvb21pby1hbGVydC13cmFwJykub3V0ZXJIZWlnaHQoKTtcbiAgICAkKCcuYmxvb21pby1hbGVydC13cmFwJykuc2hvdygpLmFuaW1hdGUoe1xuICAgICAgYm90dG9tOiAnMCdcbiAgICB9LCBcInNsb3dcIik7XG4gIH1cblxuICAkKHdpbmRvdykub24oJ2xvYWQnLCBmdW5jdGlvbigpIHtcblxuICAgIC8vIGNvbnNvbGUubG9nKGRvY3VtZW50LmNvb2tpZSk7XG4gICAgdHJ5IHsgIFxuICAgICAgaWYgKCQoJ2JvZHknKS5oYXNDbGFzcygnaG9tZScpKSB7XG4gICAgICAgIHZhciBhbGVydF9zY29wZSA9IFwiaG9tZXBhZ2VcIjtcbiAgICAgICAgdmFyIGFsZXJ0X3N0YXR1cyA9IENvb2tpZXMuZ2V0SlNPTignaG9tZXBhZ2UnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBhbGVydF9zY29wZSA9IFwic3VicGFnZXNcIjtcbiAgICAgICAgdmFyIGFsZXJ0X3N0YXR1cyA9IENvb2tpZXMuZ2V0SlNPTignc3VicGFnZXMnKTtcbiAgICAgIH1cbiAgICAgIC8vIGNvbnNvbGUubG9nKGFsZXJ0X3N0YXR1cyk7XG4gICAgICBcbiAgICAgIGlmIChhbGVydF9zdGF0dXMuc3RhdHVzICE9IFwiYmxvY2tcIikge1xuICAgICAgICBpZiAoYWxlcnRfc2NvcGUgPT0gJ2hvbWVwYWdlJykge1xuICAgICAgICAgIGlmICh0eXBlb2YoYWxlcnRfc3RhdHVzKSA9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgYmxvb21pb19vcGVuX2FsZXJ0KCk7XG4gICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YoYWxlcnRfc3RhdHVzKSA9PSAnb2JqZWN0JyAmJiAobGF0ZXN0X2hvbWVwYWdlX2FsZXJ0ID4gYWxlcnRfc3RhdHVzLmFsZXJ0X2lkKSkge1xuICAgICAgICAgICAgYmxvb21pb19vcGVuX2FsZXJ0KCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vbm90aGluZyB3aWxsIGhhcHBlblxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChhbGVydF9zY29wZSA9PSAnc3VicGFnZXMnKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZihhbGVydF9zdGF0dXMpID09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBibG9vbWlvX29wZW5fYWxlcnQoKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZihhbGVydF9zdGF0dXMpID09ICdvYmplY3QnICYmIChsYXRlc3Rfc3VicGFnZXNfYWxlcnQgPiBhbGVydF9zdGF0dXMuYWxlcnRfaWQpKSB7XG4gICAgICAgICAgICBibG9vbWlvX29wZW5fYWxlcnQoKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy9ub3RoaW5nIHdpbGwgaGFwcGVuXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IFxuICAgIH1jYXRjaChlKSB7XG4gICAgICAvL2RvIG5vdGhpbmdcbiAgICAgIC8vIGNvbnNvbGUubG9nKCdhbGVydCBkbyBub3RoaW5nJyk7XG4gICAgICBibG9vbWlvX29wZW5fYWxlcnQoKTtcbiAgICB9XG4gICAgXG5cbiAgJCgnLmJ0bi1hbGVydC1jbG9zZScpLmNsaWNrKCBmdW5jdGlvbihlKSB7XG5cbiAgICB2YXIgdGhpc19hbGVydF9pZCA9ICQodGhpcykuZGF0YSgnYWxlcnQnKTtcbiAgICB2YXIgdGhpc19hbGVydF9zY29wZSA9ICQodGhpcykuZGF0YSgnc2NvcGUnKTtcbiAgICB2YXIgYWxlcnRfaGVpZ2h0ID0gJCgnLmJsb29taW8tYWxlcnQtd3JhcCcpLm91dGVySGVpZ2h0KCk7XG5cbiAgICAkKHRoaXMpLnBhcmVudHMoJy5ibG9vbWlvLWFsZXJ0LXdyYXAnKS5hbmltYXRlKHtcbiAgICAgIGJvdHRvbTogJy0nICsgYWxlcnRfaGVpZ2h0ICsgJ3B4J1xuICAgIH0sIFwiZmFzdFwiKTtcbiAgICAkKCdmb290ZXInKS5hbmltYXRlKHtcbiAgICAgICdwYWRkaW5nLWJvdHRvbSc6IDBcbiAgICB9LCBcImZhc3RcIik7XG4gICAgYmxvb21pb19zZXRfYWxlcnRfY29va2llX2pzKHRoaXNfYWxlcnRfc2NvcGUsIHRoaXNfYWxlcnRfaWQpO1xuXG4gICAgJCh0aGlzKS5wYXJlbnRzKCcuYmxvb21pby1hbGVydC13cmFwJykuaGlkZSgpO1xuICB9KTtcbn0pO1xuIiwiLy8gVGhpcyBzY3JpcHQgZXZhbHVhdGVzIGNsaWNrcyBmb3IgYSBsaW5rIGFuY2hvcixcbi8vIGFuZCB0cmlnZ2VycyB3YXJuaW5nIG1vZGFsIGlmIGFuY2hvciBpcyBub3Qgd2hpdGVsaXN0ZWQuXG47KCBmdW5jdGlvbiggJCApIHtcbiAgICBcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIHNwZWVkYnVtcCA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIC8vIEdldCB3aGl0ZWxpc3QgZG9tYWlucyBmcm9tIHNwZWVkYnVtcC5waHBcbiAgICAgICAgLy8gc3BlZWRidW1wLnBocCByZXR1cm5zIGFuIGFycmF5IG9mIG9iamVjdHMgZnJvbSBBQ0YgZ2xvYmFsIG9wdGlvbnNcbiAgICAgICAgLy8gTGlrZSB0aGlzIFt7XCJkb21haW5cIjpcImdvb2dsZS5jb21cIn0se1wiZG9tYWluXCI6XCJmYWNlYm9vay5jb21cIn1cbiAgICAgICAgdmFyIHdoaXRlbGlzdF9kb21haW5zID0gd2luZG93LndoaXRlbGlzdF9kb21haW5zO1xuXG4gICAgICAgIC8vIE5ldyBhcnJheVxuICAgICAgICB2YXIgZG9tYWluc19hcnJheSA9IG5ldyBBcnJheTtcblxuICAgICAgICAvLyBQdXNoIGRvbWFpbnMgdG8gJ2RvbWFpbnNfYXJyYXknXG4gICAgICAgIC8vIFdlIGdldCBhbiBhcnJheSBsaWtlIHRoaXMgW1wiZ29vZ2xlLmNvbVwiLCBcImZhY2Vib29rLmNvbVwiXVxuICAgICAgICBmb3IgKCB2YXIgaSBpbiB3aGl0ZWxpc3RfZG9tYWlucyApIHtcbiAgICAgICAgICAgIGRvbWFpbnNfYXJyYXkucHVzaCggd2hpdGVsaXN0X2RvbWFpbnNbaV0uZG9tYWluICk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBQdXNoIGhvc3QgZG9tYWluIHRvIGRvbWFpbnNfYXJyYXlcbiAgICAgICAgZG9tYWluc19hcnJheS5wdXNoKCBsb2NhdGlvbi5ob3N0ICk7XG5cblxuICAgICAgICAvLyBDaGVjayBmb3IgYW5jaG9yIGluIGNsaWNrZWQgbm9kZVxuICAgICAgICBmdW5jdGlvbiBpc0luc2lkZUEobm9kZSkge1xuICAgICAgICAgICAgdmFyIHBhcmVudCA9IG5vZGUucGFyZW50Tm9kZTtcbiAgICAgICAgICAgIHdoaWxlIChwYXJlbnQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGlmIChwYXJlbnQubm9kZU5hbWUgPT0gJ0EnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50Tm9kZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEdldCBhbmNob3IgaW4gY2xpY2tlZCBub2RlXG4gICAgICAgIGZ1bmN0aW9uIGdldE5vZGVBKG5vZGUpIHtcbiAgICAgICAgICAgIHZhciBwYXJlbnQgPSBub2RlLnBhcmVudE5vZGU7XG4gICAgICAgICAgICB3aGlsZSAocGFyZW50ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZiAocGFyZW50Lm5vZGVOYW1lID09ICdBJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyZW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50Tm9kZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEV2YWx1YXRlIGNsaWNrLCBkZXRlcm1pbmUgaWYgYSBsaW5rIHdhcyBjbGlja2VkXG4gICAgICAgIC8vIElmIGEgbGluayB3YXMgY2xpY2tlZCwgZ2V0IHRoZSBsaW5rXG4gICAgICAgIC8vIElmIGxpbmsgaXMgbm90IHdoaXRlbGlzdGVkLCBzaG93IHdhcm5pbmcgcG9wdXBcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgaWYgKCBldmVudC50YXJnZXQubm9kZU5hbWUgPT0gJ0EnIHx8IGlzSW5zaWRlQShldmVudC50YXJnZXQpICkge1xuICAgICAgICAgICAgICAgIHZhciBub2RlQSA9IGdldE5vZGVBKGV2ZW50LnRhcmdldCkgfHwgZXZlbnQudGFyZ2V0O1xuXG4gICAgICAgICAgICAgICAgdmFyIHNhZmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gZG9tYWluc19hcnJheSkge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICggbm9kZUEuaHJlZi5pbmRleE9mKGRvbWFpbnNfYXJyYXlba2V5XSkgPiAwXG4gICAgICAgICAgICAgICAgICAgICAgICB8fCBub2RlQS5ocmVmID09PSBkb21haW5zX2FycmF5W2tleV0gKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzYWZlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKG5vZGVBLmhyZWYgPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgc2FmZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICggIXNhZmUgKSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gT3BlbiBzcGVlZGJ1bXAgbW9kYWwgd2l0aCBGb3VuZGF0aW9uXG4gICAgICAgICAgICAgICAgICAgIC8vICQoJyNtb2RhbC1zcGVlZGJ1bXAnKS5mb3VuZGF0aW9uKCdvcGVuJyk7XG4gICAgICAgICAgICAgICAgICAgICQoJyNtb2RhbC1zcGVlZGJ1bXAnKVxuICAgICAgICAgICAgICAgICAgICAuYW5pbWF0ZSh7d2lkdGg6J3Nob3cnfSwgJ2Zhc3QnKS5hZGRDbGFzcygnaXMtYWN0aXZlJylcbiAgICAgICAgICAgICAgICAgICAgLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgICQoJy5qcy1tb2RhbC1vdmVybGF5JykuYWRkQ2xhc3MoJ2lzLXZpc2libGUnKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnYm9keScpLmFkZENsYXNzKCduby1zY3JvbGwnKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy50YXJnZXRVUkwgPSBub2RlQS5ocmVmO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIGV2ZW50LnRhcmdldC5ub2RlTmFtZSA9PSAnQlVUVE9OJyAmJiBldmVudC50YXJnZXQuaWQgPT0gJ2NvbnRpbnVlJyApIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cub3Blbih3aW5kb3cudGFyZ2V0VVJMKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIGxldCAkZWwgPSAkKCcjbW9kYWwtc3BlZWRidW1wJyk7IFxuXG4gICAgLy8gSW5pdGlhbGl6ZXIgZnVuY3Rpb25cbiAgICB2YXIgaW5pdCA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIGlmICgkZWwpIHtcbiAgICAgICAgICAgIHNwZWVkYnVtcCgpO1xuICAgICAgICAgICAgY29uc29sZS5pbmZvKCdJbml0aWFsaXplZCBzcGVlZGJ1bXAuJyk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgaW5pdCgpO1xuXG59ICkoIGpRdWVyeSApOyIsIi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIElOREVYXG4vL1xuLy8gRW50cnkgcG9pbnQgZmlsZSBmb3Igd2VicGFjay5cbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLy8gVHdvIHdheXMgdG8gaW1wb3J0IGFub3RoZXIgZmlsZS5cbi8vIEBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvU3RhdGVtZW50cy9pbXBvcnRcbi8vIHJlcXVpcmUoICcuL21lZ2EtbWVudScgKTtcbi8vIGltcG9ydCAnLi9tZWdhLW1lbnUuanMnO1xuXG4vLyBTQ1NTXG4vLyBpbXBvcnQgJy4uLy4uL3Njc3MvYmxvb21pby9pbmRleC5zY3NzJztcblxuLy8gRm91bmRhdGlvblxuLy8gcmVxdWlyZSgnZm91bmRhdGlvbi1zaXRlcycpOyAvLyBJbXBvcnQgYWxsLlxuLy8gcmVxdWlyZSgnZm91bmRhdGlvbi1zaXRlcy9qcy9lbnRyaWVzL3BsdWdpbnMvZm91bmRhdGlvbi5jb3JlJyk7XG5cbi8vdmVuZG9yXG4vLyBpbXBvcnQgJy4vdmVuZG9yL2FjY3J1ZS5qcyc7XG4vLyBpbXBvcnQgJy4vdmVuZG9yL2pzLmNvb2tpZXMuanMnO1xuLy8gaW1wb3J0ICcuL3ZlbmRvci9jbGllbnQubWluLmpzJztcblxuXG4vL1NwZWVkYnVtcFxuaW1wb3J0ICcuL3Jhdy9zcGVlZGJ1bXAuanMnO1xuXG4vL0FsZXJ0XG5pbXBvcnQgJy4vcmF3L2Jsb29taW8tYWxlcnQuanMnO1xuXG4vL3BlcnNvbmFcbi8vIGltcG9ydCAnLi9yYXcvcGVyc29uYS5qcyc7XG5cbi8vbW9kYWxcbi8vIGltcG9ydCAnLi9yYXcvbW9kYWwuanMnO1xuXG4vL2NhbGN1bGF0b3Jcbi8vIGltcG9ydCAnLi9yYXcvY2FsY3VsYXRvci5qcyc7XG5cbi8vYWxnb2xpYVxuLy8gaW1wb3J0ICcuL3Jhdy9hbGdvbGlhLWlzJztcblxuLy9TbWFydEFwcEJhbm5lclxuLy8gaW1wb3J0ICcuL3Jhdy9zbWFydGFwcGJhbm5lci5qcyc7XG5cblxuXG4iXSwic291cmNlUm9vdCI6IiJ9